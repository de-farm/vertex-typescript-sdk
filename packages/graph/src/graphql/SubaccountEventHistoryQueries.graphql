query SubaccountModifyCollateralEventHistoryQuery(
  $subaccountEntityId: String!
  $maxTimeExclusive: BigInt!
  $minTimeInclusive: BigInt!
  $skip: Int
  $first: Int
) {
  modifyCollateralEvents(
    where: {
      subaccount: $subaccountEntityId
      blockTime_lt: $maxTimeExclusive
      blockTime_gt: $minTimeInclusive
    }
    orderBy: blockTime
    orderDirection: desc
    first: $first
    skip: $skip
  ) {
    id
    blockTime

    amount
    productId
  }
}

query SubaccountLiquidationEventHistoryQuery(
  $subaccountEntityId: String!
  $maxTimeExclusive: BigInt!
  $minTimeInclusive: BigInt!
  $skip: Int
  $first: Int
) {
  liquidationEvents(
    where: {
      liquidatee: $subaccountEntityId
      blockTime_lt: $maxTimeExclusive
      blockTime_gt: $minTimeInclusive
    }
    orderBy: blockTime
    orderDirection: desc
    first: $first
    skip: $skip
  ) {
    id
    blockTime

    spotProductId
    perpProductId

    perpAmount
    spotAmount
    liquidationPayment
    insuranceCoverage

    # Prices at time of liquidation
    spotOraclePriceX18
    perpOraclePriceX18
  }
}

query SubaccountSettlementEventHistoryQuery(
  $subaccountEntityId: String!
  $maxTimeExclusive: BigInt!
  $minTimeInclusive: BigInt!
  $skip: Int
  $first: Int
) {
  settlePnlEvents(
    where: {
      subaccount: $subaccountEntityId
      blockTime_lt: $maxTimeExclusive
      blockTime_gt: $minTimeInclusive
    }
    orderBy: blockTime
    orderDirection: desc
    first: $first
    skip: $skip
  ) {
    id
    blockTime
    productId
    amount
    positionAmount
    perpOraclePriceX18
  }
}
