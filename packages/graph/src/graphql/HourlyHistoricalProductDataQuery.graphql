# This will attempt to query both, but only one will match - an unfortunate result of the way we have to split spot & perp snapshots
query HourlyHistoricalProductDataQuery(
  $productEntityId: String!
  $minHourInclusive: BigInt!
  $maxHourExclusive: BigInt!
) {
  spotProductSnapshots(
    where: {
      product: $productEntityId
      periodIndex_gte: $minHourInclusive
      periodIndex_lt: $maxHourExclusive
      period: 3600
    }
  ) {
    id
    periodIndex
    priceX18

    lpBaseAmount
    lpQuoteAmount
    lpSupply
  }
  perpProductSnapshots(
    where: {
      product: $productEntityId
      periodIndex_gte: $minHourInclusive
      periodIndex_lt: $maxHourExclusive
      period: 3600
    }
  ) {
    id
    periodIndex
    liquidationPriceX18
    openInterest

    lpBaseAmount
    lpQuoteAmount
    lpSupply
  }
}
